---
phase: v3.1-03-ui-integration
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [src/renderer/src/components/Kanban/FeatureCard.tsx, src/renderer/src/components/Kanban/FeatureCard.css]
autonomous: true

must_haves:
  truths:
    - "Feature cards show 'Analyzing...' badge when analysis is running"
    - "Feature cards show 'X tasks pending analysis' when paused"
    - "Analysis progress updates in real-time"
  artifacts:
    - path: "src/renderer/src/components/Kanban/FeatureCard.tsx"
      provides: "Analysis status display in feature cards"
      contains: "needs_analysis"
    - path: "src/renderer/src/components/Kanban/FeatureCard.css"
      provides: "Styling for analysis indicator"
      contains: "analyzing"
  key_links:
    - from: "src/renderer/src/components/Kanban/FeatureCard.tsx"
      to: "analysis IPC events"
      via: "electronAPI listener"
      pattern: "analysis:event|needs_analysis"
---

<objective>
Add analysis status display to FeatureCard component.

Purpose: Show users when task analysis is running or pending for a feature
Output: FeatureCard displays analysis progress indicator and pending task count
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/v3.1-02-analysis-orchestrator/02-04-SUMMARY.md

@src/renderer/src/components/Kanban/FeatureCard.tsx
@src/renderer/src/components/Kanban/FeatureCard.css
@src/main/ipc/analysis-handlers.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add analysis state tracking to FeatureCard</name>
  <files>src/renderer/src/components/Kanban/FeatureCard.tsx</files>
  <action>
    Add state and effect to track analysis status:
    1. Add props: `isAnalyzing?: boolean` and `pendingAnalysisCount?: number`
    2. Add analysis indicator section similar to planning indicator
    3. Show "Analyzing..." with spinner when `isAnalyzing` is true
    4. Show "X tasks need analysis" when `pendingAnalysisCount > 0` and not analyzing
    5. Use purple/violet color to match needs_analysis status
  </action>
  <verify>TypeScript compiles: `npm run build`</verify>
  <done>FeatureCard accepts and displays analysis props</done>
</task>

<task type="auto">
  <name>Task 2: Add CSS styles for analysis indicator</name>
  <files>src/renderer/src/components/Kanban/FeatureCard.css</files>
  <action>
    Add styles for analysis status display:
    1. `.feature-card__analysis-indicator` - flex container like planning indicator
    2. `.feature-card__analysis-spinner` - animated spinner in purple/violet
    3. `.feature-card__analysis-count` - badge for pending count
    4. Use purple color scheme (rgb(147, 51, 234) / rgb(192, 132, 252))
  </action>
  <verify>Styles load without errors</verify>
  <done>Analysis indicator styled consistently with planning indicator</done>
</task>

<task type="auto">
  <name>Task 3: Wire analysis status in KanbanView</name>
  <files>src/renderer/src/views/KanbanView.tsx</files>
  <action>
    Connect analysis status to FeatureCard:
    1. Add state for tracking analysis status per feature: `analysisStatus: Record<string, { analyzing: boolean, pendingCount: number }>`
    2. Add IPC listener for 'analysis:event' to update status
    3. Add effect to fetch initial pending counts via `analysis:pending` IPC
    4. Pass `isAnalyzing` and `pendingAnalysisCount` to FeatureCard
    5. Clean up listener on unmount
  </action>
  <verify>Build passes, analysis events update UI</verify>
  <done>KanbanView passes analysis status to FeatureCard</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` passes
- [ ] FeatureCard shows analysis spinner when analyzing
- [ ] FeatureCard shows pending count badge when tasks need analysis
- [ ] No TypeScript errors
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- Feature cards display analysis status
- Purple/violet color scheme matches needs_analysis status
</success_criteria>

<output>
After completion, create `.planning/phases/v3.1-03-ui-integration/03-01-SUMMARY.md`
</output>
