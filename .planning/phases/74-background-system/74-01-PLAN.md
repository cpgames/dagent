---
phase: 74-background-system
plan: 01
status: planned
started: null
completed: null
type: execute
wave: 1
depends_on: []
files_modified:
  - src/renderer/src/components/Background/SynthwaveBackground.tsx
  - src/renderer/src/components/Background/SynthwaveBackground.css
  - src/renderer/src/components/Background/Starfield.tsx
  - src/renderer/src/components/Background/Starfield.css
  - src/renderer/src/components/Background/Horizon.tsx
  - src/renderer/src/components/Background/Horizon.css
  - src/renderer/src/components/Background/index.ts
autonomous: true
must_haves:
  truths:
    - "Background renders behind all content with starfield animation"
    - "Horizon gradient with glow effect visible at bottom of viewport"
    - "Animations respect prefers-reduced-motion setting"
    - "Background does not impact scrolling or interaction performance"
  artifacts:
    - path: "src/renderer/src/components/Background/SynthwaveBackground.tsx"
      provides: "Main background container component"
    - path: "src/renderer/src/components/Background/Starfield.tsx"
      provides: "Animated starfield with twinkling effect"
    - path: "src/renderer/src/components/Background/Horizon.tsx"
      provides: "Gradient horizon line with neon glow"
  key_links:
    - from: "src/renderer/src/components/Background/index.ts"
      to: "All background components"
      via: "Barrel export"
---

<objective>
Create synthwave background system with animated starfield and glowing horizon line.

Purpose: Complete the visual foundation for the synthwave theme with an immersive animated background.
Output: Three background components (SynthwaveBackground, Starfield, Horizon) with CSS animations and reduced motion support.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/milestones/v2.6-ROADMAP.md

# Prior phases provide CSS custom properties and patterns
@.planning/phases/70-theme-infrastructure/70-01-SUMMARY.md

# Reference files for patterns and variables
@src/renderer/src/themes/synthwave.css
@src/renderer/src/components/UI/Button.tsx
@src/renderer/src/components/UI/Button.css

# Design reference: doc/2.png shows starfield background with horizon glow
</context>

<tasks>

<task type="auto">
  <name>Task 1: Starfield Component</name>
  <files>src/renderer/src/components/Background/Starfield.tsx, src/renderer/src/components/Background/Starfield.css</files>
  <action>
Create animated starfield using CSS-only approach (no canvas for simplicity and performance):

**CSS (Starfield.css):**
- Create 3 layers of stars using pseudo-elements or multiple box-shadows
- Layer 1: Small dim stars (opacity 0.3), slow twinkle (8s animation)
- Layer 2: Medium stars (opacity 0.5), medium twinkle (5s animation)
- Layer 3: Bright stars (opacity 0.8), fast twinkle (3s animation)
- Use `@keyframes twinkle` with opacity variation (0.2 → 1 → 0.2)
- Position: fixed, inset 0, pointer-events none, z-index -2
- Use CSS custom property `--star-color: var(--text-primary)` for theming

**Stars technique:** Use box-shadow with many coordinates to create star pattern:
```css
.starfield-layer {
  width: 1px;
  height: 1px;
  box-shadow:
    100px 50px var(--star-color),
    200px 150px var(--star-color),
    /* ... more coordinates */;
}
```

**Component (Starfield.tsx):**
```typescript
interface StarfieldProps {
  /** Number of star layers (1-3) */
  layers?: 1 | 2 | 3;
}
```
- Simple functional component
- Renders div with starfield layers
- Each layer has different animation delay for variety

**Reduced motion:** Add `@media (prefers-reduced-motion: reduce)` to disable animations.
  </action>
  <verify>npm run build passes with no TypeScript errors</verify>
  <done>Starfield renders with twinkling star animation, respects reduced motion</done>
</task>

<task type="auto">
  <name>Task 2: Horizon Component</name>
  <files>src/renderer/src/components/Background/Horizon.tsx, src/renderer/src/components/Background/Horizon.css</files>
  <action>
Create glowing horizon line effect at bottom of viewport:

**CSS (Horizon.css):**
- Position: fixed, bottom 0, left 0, right 0
- Height: 200-300px for gradient area
- Pointer-events: none, z-index: -1 (above starfield, below content)

**Gradient layers:**
1. Main horizon line: thin bright line (2-4px) at a position ~150px from bottom
   - Linear gradient: transparent → magenta → cyan → transparent
   - Add glow effect with box-shadow
2. Reflection/glow below line: fading gradient downward
   - Linear gradient from line color to transparent
3. Sky glow above line: subtle upward gradient
   - Very subtle magenta/purple tint fading to transparent

**Grid lines (optional enhancement):**
- Perspective grid using linear-gradient
- Converging lines toward horizon point
- Very low opacity (0.1-0.2)

**Component (Horizon.tsx):**
```typescript
interface HorizonProps {
  /** Show perspective grid lines */
  showGrid?: boolean;
  /** Horizon position from bottom (px) */
  position?: number;
}
```
- Default position: 150px from bottom
- Grid lines optional (default false for performance)

**CSS Variables to use:**
- `--accent-primary` (cyan) for right side of line
- `--accent-secondary` (magenta) for left side of line
- `--glow-primary`, `--glow-secondary` for glow effects
  </action>
  <verify>npm run build passes with no TypeScript errors</verify>
  <done>Horizon renders with gradient line and glow effect</done>
</task>

<task type="auto">
  <name>Task 3: SynthwaveBackground Container and Barrel Export</name>
  <files>src/renderer/src/components/Background/SynthwaveBackground.tsx, src/renderer/src/components/Background/SynthwaveBackground.css, src/renderer/src/components/Background/index.ts</files>
  <action>
Create main background container that combines Starfield and Horizon:

**CSS (SynthwaveBackground.css):**
- Container: position fixed, inset 0, z-index -10, overflow hidden
- Background color: `var(--bg-base)` as fallback
- Optional: subtle radial gradient from center (slightly lighter) to edges

**Component (SynthwaveBackground.tsx):**
```typescript
interface SynthwaveBackgroundProps {
  /** Enable starfield animation */
  stars?: boolean;
  /** Enable horizon glow */
  horizon?: boolean;
  /** Show grid lines on horizon */
  grid?: boolean;
}
```
- Default all options to true
- Conditionally render Starfield and Horizon based on props
- Can be disabled via props for performance testing

**Barrel Export (index.ts):**
```typescript
export { SynthwaveBackground, type SynthwaveBackgroundProps } from './SynthwaveBackground';
export { Starfield, type StarfieldProps } from './Starfield';
export { Horizon, type HorizonProps } from './Horizon';
```

**Important:** Do NOT integrate into App.tsx yet - that's Phase 75.
  </action>
  <verify>npm run build passes with no TypeScript errors</verify>
  <done>SynthwaveBackground composes Starfield and Horizon, all components exported</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] Starfield.tsx creates twinkling star animation with CSS
- [ ] Horizon.tsx renders gradient line with glow effect
- [ ] SynthwaveBackground.tsx combines both components
- [ ] All components use CSS custom properties (no hardcoded colors)
- [ ] Reduced motion support via `prefers-reduced-motion` media query
- [ ] All components exported from index.ts
</verification>

<success_criteria>

- All 3 background components created with CSS files
- Starfield uses CSS box-shadow technique for stars
- Horizon has gradient line with glow effects
- SynthwaveBackground composes child components
- Animations respect prefers-reduced-motion
- Build passes without errors
</success_criteria>

<output>
After completion, create `.planning/phases/74-background-system/74-01-SUMMARY.md`
</output>
