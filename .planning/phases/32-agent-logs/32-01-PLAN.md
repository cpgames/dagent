---
phase: 32-agent-logs
plan: 01
type: execute
---

<objective>
Create LogDialog component and extend log types to support PM agent logging.

Purpose: Establish the UI and data model for viewing agent communications in a popup dialog.
Output: LogDialog component, extended log types with PM agent support.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-phase.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/milestones/v1.7-ROADMAP.md
@src/shared/types/log.ts
@src/renderer/src/components/Agents/AgentLogsPanel.tsx
@src/renderer/src/components/DAG/NodeDialog.tsx
@src/renderer/src/stores/dialog-store.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Extend log types for PM agent</name>
  <files>src/shared/types/log.ts</files>
  <action>
Add 'pm' to AgentType union. Add 'pm-query' and 'pm-response' to LogEntryType.
This enables PM agent communications to be logged alongside harness/task/merge agents.
Keep existing types unchanged for backwards compatibility.
  </action>
  <verify>TypeScript compiles with no errors: npx tsc --noEmit</verify>
  <done>AgentType includes 'pm', LogEntryType includes 'pm-query' | 'pm-response'</done>
</task>

<task type="auto">
  <name>Task 2: Create LogDialog component</name>
  <files>src/renderer/src/components/DAG/LogDialog.tsx</files>
  <action>
Create LogDialog popup component following NodeDialog pattern:
- Props: entries (LogEntry[]), title (string), onClose callback
- Fixed overlay with centered modal (same pattern as NodeDialog)
- Header with title and close button
- Scrollable log entries list using LogEntryRow pattern from AgentLogsPanel
- Filter buttons (all, by agent type) in header area
- Use inline styles for gap spacing (Tailwind v4 class generation issue)
- Export from components/DAG/index.ts
  </action>
  <verify>TypeScript compiles, component exported from index</verify>
  <done>LogDialog component renders log entries with filtering, matches app styling</done>
</task>

<task type="auto">
  <name>Task 3: Add log dialog state to dialog store</name>
  <files>src/renderer/src/stores/dialog-store.ts</files>
  <action>
Add state for log dialog:
- logDialogOpen: boolean
- logDialogTitle: string | null
- logDialogTaskId: string | null (for task-specific filtering)
- logDialogSource: 'task' | 'pm' | null (to distinguish log source)
- openLogDialog: (title, taskId?, source?) => void
- closeLogDialog: () => void
Follow existing pattern with nodeDialogOpen/closeNodeDialog.
  </action>
  <verify>TypeScript compiles, store exports new state/actions</verify>
  <done>Dialog store has log dialog state with open/close actions</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run typecheck` passes
- [ ] LogDialog component exists and is exported
- [ ] Log types include PM agent support
- [ ] Dialog store has log dialog state
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- No TypeScript errors
- LogDialog ready for integration with task/PM buttons
</success_criteria>

<output>
After completion, create `.planning/phases/32-agent-logs/32-01-SUMMARY.md`
</output>
