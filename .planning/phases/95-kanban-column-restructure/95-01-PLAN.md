---
phase: 95-kanban-column-restructure
plan: 01
type: execute
wave: 2
depends_on: ["100-01"]
files_modified:
  - src/renderer/src/views/KanbanView.tsx
  - src/renderer/src/views/KanbanView.css
  - src/renderer/src/components/Kanban/KanbanColumn.tsx
autonomous: true

must_haves:
  truths:
    - "Kanban board shows 6 columns in correct order"
    - "Not Started column is removed"
    - "Planning, Backlog, and Archived columns exist"
    - "Board is horizontally scrollable"
    - "Each column is independently vertically scrollable"
    - "Drag-and-drop uses centralized status management"
  artifacts:
    - path: "src/renderer/src/views/KanbanView.tsx"
      provides: "Updated column configuration with 6 columns"
      contains: "'planning' | 'backlog'"
      min_lines: 150
    - path: "src/renderer/src/views/KanbanView.css"
      provides: "Scrolling styles for board and columns"
      contains: "overflow-x"
  key_links:
    - from: "src/renderer/src/views/KanbanView.tsx"
      to: "useFeatureStore.updateFeatureStatus"
      via: "drag-and-drop status change"
      pattern: "updateFeatureStatus"
---

<objective>
Update Kanban board with new column structure and scrolling.

Purpose: Implement new workflow columns (Planning → Backlog → In Progress → Needs Attention → Completed → Archived) with proper scrolling UX.
Output: Restructured Kanban board with 6 columns, horizontal board scrolling, and independent vertical column scrolling.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/milestones/v2.9-create-feature-workflow.md
@.planning/phases/100-feature-status-system/100-01-SUMMARY.md
@src/renderer/src/views/KanbanView.tsx
@src/renderer/src/components/Kanban/KanbanColumn.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update KanbanView column configuration</name>
  <files>src/renderer/src/views/KanbanView.tsx</files>
  <action>
    Update the columns array (lines 13-18) to new structure:

    ```typescript
    const columns: { title: string; status: FeatureStatus }[] = [
      { title: 'Planning', status: 'planning' },
      { title: 'Backlog', status: 'backlog' },
      { title: 'In Progress', status: 'in_progress' },
      { title: 'Needs Attention', status: 'needs_attention' },
      { title: 'Completed', status: 'completed' },
      { title: 'Archived', status: 'archived' },
    ];
    ```

    Remove 'Not Started' column entirely.

    Update featuresByStatus grouping (lines 42-55):
    - Add 'planning', 'backlog', 'archived' to the grouped object initialization
    - Remove 'not_started' from the grouped object

    Why: This implements the new workflow column order.
    Avoid: Do not change handleArchiveFeature logic yet (Phase 99 will auto-archive).
  </action>
  <verify>npm run build succeeds</verify>
  <done>Column configuration has 6 columns in correct order, not_started is removed</done>
</task>

<task type="auto">
  <name>Task 2: Add horizontal and vertical scrolling</name>
  <files>src/renderer/src/views/KanbanView.tsx, src/renderer/src/views/KanbanView.css</files>
  <action>
    **In KanbanView.tsx**:
    - Update the board container div (line 120) to enable horizontal scrolling
    - Existing: `overflow-x-auto` class (already present)
    - Ensure columns div has: `display: flex`, `gap: 12px`, `min-width: fit-content`

    **In KanbanView.css** (create if doesn't exist):
    - Add horizontal scrolling styles for board container:
      ```css
      .kanban-view__board {
        overflow-x: auto;
        height: 100%;
      }
      ```
    - Add vertical scrolling styles for each column (via KanbanColumn):
      ```css
      .kanban-column {
        display: flex;
        flex-direction: column;
        min-width: 300px;
        max-width: 300px;
        height: 100%;
      }
      .kanban-column__content {
        overflow-y: auto;
        flex: 1;
      }
      ```

    **Update KanbanColumn component**:
    - Wrap column content (feature cards) in a scrollable div with class `kanban-column__content`
    - Ensure column header is fixed (not scrollable)
    - Column content scrolls independently

    Why: 6 columns won't fit on most screens horizontally, need scrolling.
    Avoid: Do not add custom scrollbar styling here (that's Phase 97).
  </action>
  <verify>
    npm run build succeeds
    No layout shift or overflow issues
  </verify>
  <done>Kanban board scrolls horizontally, columns scroll vertically independently</done>
</task>

<task type="auto">
  <name>Task 3: Update drag-and-drop to use centralized status management</name>
  <files>src/renderer/src/views/KanbanView.tsx</files>
  <action>
    Locate the drag-and-drop handler (likely onDrop or onCardMove callback in KanbanColumn).

    **Update handler**:
    - Instead of directly calling `updateFeature(featureId, { status: newStatus })`
    - Call `updateFeatureStatus(featureId, newStatus)` (from Phase 100)
    - This ensures status transitions go through centralized validation
    - Handle validation errors gracefully (show toast notification if transition invalid)

    **Import**:
    - Ensure updateFeatureStatus is available from useFeatureStore

    **Error handling**:
    - If updateFeatureStatus fails (invalid transition), show error toast
    - Example: "Cannot move feature from Planning to Completed directly"
    - Revert drag-and-drop visually (feature stays in original column)

    Why: Centralized status management enforces valid transitions and emits events.
    Avoid: Do not implement drag-and-drop library if not already present (assume it exists).
  </action>
  <verify>
    npm run build succeeds
    Drag-and-drop calls updateFeatureStatus method
  </verify>
  <done>Drag-and-drop uses centralized status management with validation</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] npm run build succeeds with no TypeScript errors
- [ ] Kanban board has 6 columns: Planning, Backlog, In Progress, Needs Attention, Completed, Archived
- [ ] Not Started column is removed
- [ ] Board container is horizontally scrollable
- [ ] Each column is independently vertically scrollable
- [ ] Drag-and-drop calls updateFeatureStatus (centralized management)
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- No errors or warnings introduced
- Kanban board supports new workflow with proper scrolling UX
</success_criteria>

<output>
After completion, create `.planning/phases/95-kanban-column-restructure/95-01-SUMMARY.md`
</output>
