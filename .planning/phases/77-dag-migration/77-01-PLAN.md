---
phase: 77-dag-migration
plan: 01
status: planned
started: null
completed: null
type: execute
wave: 1
depends_on: []
files_modified:
  - src/renderer/src/views/DAGView.tsx
  - src/renderer/src/components/DAG/TaskNode.tsx
  - src/renderer/src/components/DAG/TaskNode.css
  - src/renderer/src/components/DAG/SelectableEdge.tsx
  - src/renderer/src/components/DAG/SelectableEdge.css
  - src/renderer/src/components/DAG/ExecutionControls.tsx
  - src/renderer/src/components/DAG/ExecutionControls.css
  - src/renderer/src/components/DAG/FeatureTabs.tsx
  - src/renderer/src/components/DAG/FeatureTabs.css
autonomous: true
must_haves:
  truths:
    - "Task nodes have status-colored borders with neon glow"
    - "Selected nodes have cyan ring highlight"
    - "Edges show magenta glow when selected"
    - "Execution controls use theme button styling"
    - "Feature tabs use theme-colored left borders"
  artifacts:
    - path: "src/renderer/src/components/DAG/TaskNode.css"
      provides: "Synthwave task node styling"
    - path: "src/renderer/src/components/DAG/SelectableEdge.css"
      provides: "Synthwave edge styling"
    - path: "src/renderer/src/components/DAG/ExecutionControls.css"
      provides: "Synthwave control bar styling"
    - path: "src/renderer/src/components/DAG/FeatureTabs.css"
      provides: "Synthwave tab styling"
  key_links:
    - from: "TaskNode.tsx"
      to: "TaskNode.css"
      via: "CSS import and class usage"
    - from: "SelectableEdge.tsx"
      to: "SelectableEdge.css"
      via: "CSS import and class usage"
---

<objective>
Migrate DAG view components to synthwave theme with CSS custom properties.

Purpose: Apply synthwave aesthetic to the DAG graph view (task nodes, edges, controls, feature tabs) consistent with the established theme system.
Output: Updated DAGView.tsx and DAG components using theme variables instead of Tailwind color classes.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md

# Prior phases provide CSS custom properties and patterns
@.planning/phases/70-theme-infrastructure/70-01-SUMMARY.md
@.planning/phases/76-kanban-migration/76-01-SUMMARY.md

# Reference files for patterns and variables
@src/renderer/src/themes/synthwave.css
@src/renderer/src/components/UI/Card.css
@src/renderer/src/components/UI/Button.css

# Current DAG components to migrate
@src/renderer/src/views/DAGView.tsx
@src/renderer/src/components/DAG/TaskNode.tsx
@src/renderer/src/components/DAG/SelectableEdge.tsx
@src/renderer/src/components/DAG/ExecutionControls.tsx
@src/renderer/src/components/DAG/FeatureTabs.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create TaskNode CSS and Update Component</name>
  <files>src/renderer/src/components/DAG/TaskNode.tsx, src/renderer/src/components/DAG/TaskNode.css</files>
  <action>
Create CSS file and update TaskNode component to use synthwave styling:

**CSS (TaskNode.css):**
```css
/**
 * TaskNode Component Styles
 * DAG task nodes with status-colored borders and glow effects
 */

.task-node {
  min-width: 200px;
  border-radius: var(--radius-lg);
  border: 2px solid var(--border-default);
  background: var(--bg-elevated);
  box-shadow: var(--shadow-lg);
  transition: all var(--transition-fast);
}

.task-node--selected {
  box-shadow: 0 0 0 2px var(--accent-primary-dim);
}

/* Status border colors */
.task-node--blocked {
  border-color: var(--accent-primary);
  background: var(--color-info-dim);
}

.task-node--ready_for_dev {
  border-color: var(--accent-primary);
  background: var(--color-info-dim);
}

.task-node--in_progress {
  border-color: var(--color-warning);
  background: var(--color-warning-dim);
}

.task-node--ready_for_qa {
  border-color: var(--accent-secondary);
  background: var(--accent-secondary-dim);
}

.task-node--ready_for_merge {
  border-color: var(--color-warning);
  background: var(--color-warning-dim);
}

.task-node--completed {
  border-color: var(--color-success);
  background: var(--color-success-dim);
}

.task-node--failed {
  border-color: var(--color-error);
  background: var(--color-error-dim);
}

.task-node__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--space-sm) var(--space-md);
  border-bottom: 1px solid var(--border-subtle);
}

.task-node__title {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
}

.task-node__title-text {
  font-size: 0.875rem;
  font-weight: 500;
  color: var(--text-primary);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  max-width: 120px;
}

.task-node__lock-icon {
  width: 1rem;
  height: 1rem;
  color: var(--text-muted);
}

.task-node__actions {
  display: flex;
  align-items: center;
  gap: var(--space-xs);
}

.task-node__action-btn {
  padding: var(--space-xs);
  border-radius: var(--radius-sm);
  background: transparent;
  border: none;
  color: var(--text-muted);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.task-node__action-btn:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.task-node__action-btn--delete:hover {
  color: var(--color-error);
}

.task-node__action-icon {
  width: 1rem;
  height: 1rem;
}

/* State badge section */
.task-node__badge-section {
  padding: var(--space-xs) var(--space-md);
}

.task-node__badge {
  display: inline-block;
  font-size: 0.75rem;
  font-weight: 500;
  padding: 0.125rem var(--space-sm);
  border-radius: var(--radius-sm);
}

.task-node__badge--dev {
  background: var(--color-info-dim);
  color: var(--accent-primary);
}

.task-node__badge--qa {
  background: var(--color-warning-dim);
  color: var(--color-warning);
}

.task-node__badge--merge {
  background: var(--accent-secondary-dim);
  color: var(--accent-secondary);
}

.task-node__badge--failed {
  background: var(--color-error-dim);
  color: var(--color-error);
}

/* Status text */
.task-node__status {
  padding: var(--space-sm) var(--space-md);
}

.task-node__status-text {
  font-size: 0.75rem;
  color: var(--text-muted);
}

/* React Flow handle overrides */
.task-node__handle {
  width: 0.75rem !important;
  height: 0.75rem !important;
  background: var(--text-muted) !important;
  border: 2px solid var(--bg-elevated) !important;
}
```

**Component updates:**
- Import CSS file
- Remove `statusBorderColors` and `statusBgColors` Tailwind mappings
- Replace Tailwind classes with CSS classes
- Use status-based node class: `task-node--${task.status}`
- Update `stateBadgeConfig` to use CSS classes instead of Tailwind
  </action>
  <verify>npm run build passes with no TypeScript errors</verify>
  <done>TaskNode uses CSS custom properties with status-colored borders and glow effects</done>
</task>

<task type="auto">
  <name>Task 2: Create SelectableEdge CSS and Update Component</name>
  <files>src/renderer/src/components/DAG/SelectableEdge.tsx, src/renderer/src/components/DAG/SelectableEdge.css</files>
  <action>
Create CSS file and update SelectableEdge component to use synthwave styling:

**CSS (SelectableEdge.css):**
```css
/**
 * SelectableEdge Component Styles
 * DAG edges with selection highlighting and delete confirmation
 */

.edge-label {
  position: absolute;
  pointer-events: all;
  width: 40px;
  height: 40px;
  cursor: pointer;
}

.edge-label--selected {
  z-index: 10;
}

.edge-delete-btn {
  width: 1.5rem;
  height: 1.5rem;
  border-radius: var(--radius-full);
  background: var(--color-error);
  border: 1px solid var(--color-error);
  color: var(--text-primary);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.75rem;
  font-weight: 700;
  box-shadow: var(--shadow-lg);
  cursor: pointer;
  transition: background var(--transition-fast);
}

.edge-delete-btn:hover {
  background: var(--color-error);
  filter: brightness(1.2);
}

.edge-confirm-dialog {
  background: var(--bg-elevated);
  border: 1px solid var(--border-default);
  border-radius: var(--radius-lg);
  padding: var(--space-sm);
  box-shadow: var(--shadow-xl);
  display: flex;
  flex-direction: column;
  gap: var(--space-sm);
  min-width: 140px;
}

.edge-confirm-text {
  font-size: 0.75rem;
  color: var(--text-secondary);
  text-align: center;
}

.edge-confirm-actions {
  display: flex;
  gap: var(--space-sm);
  justify-content: center;
}

.edge-confirm-btn {
  padding: var(--space-xs) var(--space-sm);
  font-size: 0.75rem;
  border-radius: var(--radius-sm);
  border: none;
  cursor: pointer;
  transition: background var(--transition-fast);
}

.edge-confirm-btn--delete {
  background: var(--color-error);
  color: var(--text-primary);
}

.edge-confirm-btn--delete:hover {
  filter: brightness(1.2);
}

.edge-confirm-btn--cancel {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.edge-confirm-btn--cancel:hover {
  background: var(--bg-active);
}
```

**Component updates:**
- Import CSS file
- Replace inline style colors with theme variables:
  - Default edge: `var(--text-muted)` or `#6a5080`
  - Selected edge: `var(--accent-primary)` or `#00f0ff`
- Replace Tailwind classes with CSS classes
- Keep the inline style object for stroke but use CSS variables for colors
  </action>
  <verify>npm run build passes with no TypeScript errors</verify>
  <done>SelectableEdge uses CSS custom properties with neon highlight on selection</done>
</task>

<task type="auto">
  <name>Task 3: Create ExecutionControls CSS and Update Component</name>
  <files>src/renderer/src/components/DAG/ExecutionControls.tsx, src/renderer/src/components/DAG/ExecutionControls.css</files>
  <action>
Create CSS file and update ExecutionControls component to use synthwave styling:

**CSS (ExecutionControls.css):**
```css
/**
 * ExecutionControls Component Styles
 * DAG execution control bar with themed buttons
 */

.execution-controls {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
}

.execution-controls__btn {
  display: flex;
  align-items: center;
  gap: var(--space-xs);
  padding: var(--space-sm) var(--space-md);
  border-radius: var(--radius-md);
  font-size: 0.875rem;
  border: none;
  cursor: pointer;
  transition: all var(--transition-fast);
}

.execution-controls__btn--active {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.execution-controls__btn--active:hover {
  background: var(--bg-active);
}

.execution-controls__btn--disabled {
  background: var(--bg-hover);
  color: var(--text-disabled);
  cursor: not-allowed;
}

.execution-controls__btn-icon {
  width: 1rem;
  height: 1rem;
}

.execution-controls__divider {
  width: 1px;
  height: 1.5rem;
  background: var(--border-subtle);
  margin: 0 var(--space-sm);
}

.execution-controls__status {
  margin-left: var(--space-lg);
  font-size: 0.875rem;
  display: flex;
  align-items: center;
}

.execution-controls__status-dot {
  display: inline-block;
  width: 0.5rem;
  height: 0.5rem;
  border-radius: var(--radius-full);
  margin-right: var(--space-sm);
}

.execution-controls__status-dot--running {
  background: var(--color-warning);
  animation: pulse 1.5s ease-in-out infinite;
}

.execution-controls__status-dot--paused {
  background: var(--accent-primary);
}

.execution-controls__status-dot--idle {
  background: var(--text-muted);
}

.execution-controls__status-text {
  color: var(--text-muted);
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}
```

**Component updates:**
- Import CSS file
- Replace `buttonBase`, `activeButton`, `disabledButton` Tailwind strings with CSS classes
- Replace status indicator Tailwind classes with CSS classes
  </action>
  <verify>npm run build passes with no TypeScript errors</verify>
  <done>ExecutionControls uses CSS custom properties with themed button styling</done>
</task>

<task type="auto">
  <name>Task 4: Create FeatureTabs CSS and Update Component</name>
  <files>src/renderer/src/components/DAG/FeatureTabs.tsx, src/renderer/src/components/DAG/FeatureTabs.css</files>
  <action>
Create CSS file and update FeatureTabs component to use synthwave styling:

**CSS (FeatureTabs.css):**
```css
/**
 * FeatureTabs Component Styles
 * Feature tab navigation with status-colored left borders
 */

.feature-tabs {
  display: flex;
  gap: var(--space-sm);
  overflow-x: auto;
  padding: var(--space-sm);
  padding-bottom: var(--space-sm);
}

.feature-tabs__empty {
  padding: var(--space-sm) var(--space-lg);
  font-size: 0.875rem;
  color: var(--text-muted);
}

.feature-tabs__tab {
  padding: var(--space-sm) var(--space-md);
  border-radius: var(--radius-md) var(--radius-md) 0 0;
  font-size: 0.875rem;
  white-space: nowrap;
  border: none;
  border-left: 4px solid;
  background: var(--bg-elevated);
  color: var(--text-primary);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.feature-tabs__tab:hover {
  background: var(--bg-hover);
}

.feature-tabs__tab--active {
  background: var(--bg-hover);
  box-shadow: inset 0 0 0 1px var(--border-subtle);
}

/* Status left border colors */
.feature-tabs__tab--not_started {
  border-left-color: var(--text-muted);
}

.feature-tabs__tab--in_progress {
  border-left-color: var(--accent-primary);
}

.feature-tabs__tab--needs_attention {
  border-left-color: var(--color-warning);
}

.feature-tabs__tab--completed {
  border-left-color: var(--color-success);
}
```

**Component updates:**
- Import CSS file
- Remove `statusBorderColors` Tailwind mapping
- Replace Tailwind classes with CSS classes
- Use status-based tab class: `feature-tabs__tab--${feature.status}`
  </action>
  <verify>npm run build passes with no TypeScript errors</verify>
  <done>FeatureTabs uses CSS custom properties with status-colored left borders</done>
</task>

<task type="auto">
  <name>Task 5: Update DAGView Theme Variables</name>
  <files>src/renderer/src/views/DAGView.tsx</files>
  <action>
Update DAGView.tsx to use theme CSS variables:

**Updates:**
1. Feature tabs container border:
   - `border-gray-700` → `border-[var(--border-default)]`
   - `bg-gray-900` → `bg-[var(--bg-surface)]`

2. React Flow canvas background:
   - `bg-gray-900` → `bg-[var(--bg-base)]`
   - Background dots color: `#374151` → use theme variable or keep as is since it's for grid

3. Error banner:
   - `bg-red-900/90 text-red-100` → `bg-[var(--color-error-dim)] text-[var(--color-error)]`
   - Dismiss button: `text-red-200 hover:text-white` → `text-[var(--color-error)] hover:text-[var(--text-primary)]`

4. Mutation indicator:
   - `bg-gray-800 border-gray-700` → `bg-[var(--bg-elevated)] border-[var(--border-default)]`
   - `bg-yellow-500` → `bg-[var(--color-warning)]`
   - `text-gray-300` → `text-[var(--text-secondary)]`

5. Empty state:
   - `text-gray-400` → `text-[var(--text-muted)]`

6. Control bar:
   - `border-gray-700 bg-gray-800` → `border-[var(--border-default)] bg-[var(--bg-surface)]`

7. Chat sidebar spec toggle:
   - `border-gray-700 bg-gray-800` → `border-[var(--border-default)] bg-[var(--bg-surface)]`
   - `text-gray-400 hover:text-white` → `text-[var(--text-muted)] hover:text-[var(--text-primary)]`

8. Spec viewer container:
   - `border-gray-700` → `border-[var(--border-default)]`

9. React Flow Controls and MiniMap:
   - Update the className overrides to use theme variables where possible
  </action>
  <verify>npm run build passes with no TypeScript errors</verify>
  <done>DAGView uses theme variables for all color references</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] TaskNode.css exists with CSS custom properties
- [ ] TaskNode.tsx uses CSS classes instead of Tailwind
- [ ] SelectableEdge.css exists with CSS custom properties
- [ ] SelectableEdge.tsx uses CSS classes instead of Tailwind
- [ ] ExecutionControls.css exists with CSS custom properties
- [ ] ExecutionControls.tsx uses CSS classes instead of Tailwind
- [ ] FeatureTabs.css exists with CSS custom properties
- [ ] FeatureTabs.tsx uses CSS classes instead of Tailwind
- [ ] DAGView.tsx uses theme variables for colors
- [ ] Status colors use theme semantic variables (not hardcoded hex values)
</verification>

<success_criteria>

- Task nodes have status-colored borders using theme variables
- Selected nodes have cyan ring highlight
- Edges glow magenta when selected
- Execution control buttons use theme styling
- Feature tabs have theme status colors
- All Tailwind color classes replaced with CSS custom properties
- Build passes without errors
</success_criteria>

<output>
After completion, create `.planning/phases/77-dag-migration/77-01-SUMMARY.md`
</output>
