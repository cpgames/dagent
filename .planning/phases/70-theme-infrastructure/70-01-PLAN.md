---
phase: 70-theme-infrastructure
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/renderer/src/themes/synthwave.css
  - src/renderer/src/themes/index.css
  - src/renderer/src/contexts/ThemeContext.tsx
  - src/renderer/src/assets/main.css
  - src/renderer/src/App.tsx
autonomous: true

must_haves:
  truths:
    - "Theme values are defined as CSS custom properties"
    - "Components can access theme values via CSS variables"
    - "Theme can be switched by changing data-theme attribute"
    - "User's theme preference persists across sessions"
  artifacts:
    - path: "src/renderer/src/themes/synthwave.css"
      provides: "Synthwave theme CSS custom properties"
      min_lines: 50
    - path: "src/renderer/src/contexts/ThemeContext.tsx"
      provides: "Theme context and provider"
      exports: ["ThemeProvider", "useTheme"]
    - path: "src/renderer/src/themes/index.css"
      provides: "Theme loader that imports all themes"
  key_links:
    - from: "App.tsx"
      to: "ThemeProvider"
      via: "wraps app content"
      pattern: "<ThemeProvider>"
    - from: "ThemeProvider"
      to: "document.documentElement"
      via: "sets data-theme attribute"
      pattern: "data-theme"
    - from: "main.css"
      to: "themes/index.css"
      via: "@import"
      pattern: "@import.*themes"
---

<objective>
Create the foundational theming infrastructure with CSS custom properties and React context.

Purpose: Enable runtime theme switching by decoupling color/effect values from components. This is the foundation for all subsequent UI component work.

Output: Theme CSS files, ThemeContext, and App.tsx integration.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/milestones/v2.6-ROADMAP.md

# Reference images for color extraction:
# doc/1.png - Component showcase with synthwave colors
# doc/2.png - Kanban board layout
# doc/3.png - Chat/detail view

# Current styling approach:
@src/renderer/src/assets/main.css
@src/renderer/src/assets/base.css
@src/renderer/src/App.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Synthwave Theme CSS</name>
  <files>src/renderer/src/themes/synthwave.css, src/renderer/src/themes/index.css</files>
  <action>
Create themes directory and synthwave.css with CSS custom properties:

**Color palette (extracted from reference images):**
- Background base: #0a0015 (deep space purple-black)
- Background surface: rgba(26, 16, 48, 0.8) (translucent purple)
- Background elevated: rgba(40, 20, 70, 0.9) (lighter purple for modals)
- Primary accent: #00f0ff (cyan - buttons, links)
- Secondary accent: #ff00ff (magenta - borders, highlights)
- Tertiary accent: #ff6090 (pink - warnings)
- Success: #00ff88 (neon green)
- Warning: #ff9500 (neon orange)
- Error: #ff3366 (neon red)
- Text primary: #ffffff
- Text secondary: #b8a0d0 (light purple)
- Text muted: #6a5080 (dim purple)
- Border default: rgba(255, 0, 255, 0.3)
- Border accent: #ff00ff

**Effect values:**
- Glow primary: 0 0 10px var(--accent-primary), 0 0 20px var(--accent-primary)
- Glow secondary: 0 0 10px var(--accent-secondary), 0 0 20px var(--accent-secondary)
- Border radius: 0.5rem (buttons), 0.75rem (cards), 1rem (dialogs)

Use `:root[data-theme="synthwave"]` selector.

Also create index.css that imports synthwave.css.
  </action>
  <verify>Files exist with correct selectors: grep -l "data-theme" src/renderer/src/themes/</verify>
  <done>synthwave.css contains 50+ CSS custom properties, index.css imports it</done>
</task>

<task type="auto">
  <name>Task 2: Create ThemeContext</name>
  <files>src/renderer/src/contexts/ThemeContext.tsx</files>
  <action>
Create React context for theme management:

```tsx
interface ThemeContextValue {
  theme: 'synthwave' | 'dark';  // Extensible for future themes
  setTheme: (theme: 'synthwave' | 'dark') => void;
}
```

ThemeProvider should:
1. Initialize from localStorage ('dagent.theme') or default to 'synthwave'
2. Set `data-theme` attribute on document.documentElement when theme changes
3. Persist to localStorage on change
4. Provide useTheme hook for components

Create contexts/ directory if it doesn't exist.
  </action>
  <verify>TypeScript compiles: npx tsc --noEmit src/renderer/src/contexts/ThemeContext.tsx</verify>
  <done>ThemeContext exports ThemeProvider and useTheme hook</done>
</task>

<task type="auto">
  <name>Task 3: Integrate Theme System</name>
  <files>src/renderer/src/assets/main.css, src/renderer/src/App.tsx</files>
  <action>
1. Update main.css to import themes:
   - Add `@import './themes/index.css';` after tailwind import

2. Update App.tsx:
   - Import ThemeProvider from contexts/ThemeContext
   - Wrap the entire app content with ThemeProvider
   - ThemeProvider should be inside any error boundaries but outside main layout

Ensure the theme is applied on initial load (no flash of unstyled content).
  </action>
  <verify>
    - Build passes: npm run build
    - App loads with data-theme attribute: check document.documentElement in dev tools
  </verify>
  <done>App wrapped with ThemeProvider, theme CSS loaded, data-theme="synthwave" set on root</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] themes/synthwave.css exists with CSS custom properties
- [ ] ThemeContext.tsx exports ThemeProvider and useTheme
- [ ] App.tsx wraps content with ThemeProvider
- [ ] Running app shows data-theme="synthwave" on html element
- [ ] CSS variables accessible: getComputedStyle(document.documentElement).getPropertyValue('--accent-primary')
</verification>

<success_criteria>
- All tasks completed
- Theme infrastructure is functional
- CSS custom properties are defined and accessible
- Theme persists across page refreshes
- No visual regressions (existing styles still work)
</success_criteria>

<output>
After completion, create `.planning/phases/70-theme-infrastructure/70-01-SUMMARY.md`
</output>
