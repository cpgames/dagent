# Milestone v1.1: Critical Fixes

**Status:** SHIPPED 2026-01-13
**Phases:** 8-10
**Total Plans:** 10

## Overview

Fix critical blocking issues discovered in v1.0 testing: authentication not initializing, feature creation completely non-functional, and UI polish issues creating a janky experience.

## Phases

### Phase 8: Authentication Fixes

**Goal**: Make authentication actually work - initialize on startup, fix credential detection, show auth status in UI
**Depends on**: v1.0 complete
**Plans**: 3 plans

Plans:
- [x] 08-01: Auth initialization on app startup (main + renderer)
- [x] 08-02: Fix credential detection (Windows paths, Claude CLI stub)
- [x] 08-03: Auth status UI (indicator + authentication dialog)

**Issues fixed:**
- App.tsx didn't call `useAuthStore.initialize()` on startup
- Main process didn't auto-init AuthManager
- Claude CLI detection always returned null (stub)
- Windows path for Claude CLI config was identical to Unix path
- setCredentials error handler didn't update error state
- No visual indication of authentication status
- No dialog to prompt user for credentials if auto-detection fails

### Phase 9: Feature Creation

**Goal**: Enable users to create new features from the UI
**Depends on**: Phase 8
**Plans**: 3 plans

Plans:
- [x] 09-01: Feature creation backend (IPC handler, storage method)
- [x] 09-02: Feature creation dialog component
- [x] 09-03: Connect "New Feature" button to creation flow

**Issues fixed:**
- "New Feature" button had no onClick handler
- No `createFeature()` method in store, IPC, or storage
- No dialog to collect feature name from user
- No `storage:createFeature` IPC handler
- Feature creation now creates git worktree

### Phase 10: UI Polish

**Goal**: Fix UI jankiness - loading states, error display, layout issues, disabled button clarity
**Depends on**: Phase 9
**Plans**: 4 plans

Plans:
- [x] 10-01: Loading states and feedback (spinners, progress indicators)
- [x] 10-02: Error display and user-friendly messages
- [x] 10-03: Dirty state tracking and unsaved changes warning
- [x] 10-04: Layout fixes and placeholder cleanup

**Issues fixed:**
- No loading states during operations
- Errors logged to console, not shown to users
- No dirty state tracking in ContextView
- Disabled buttons showed no explanation
- Hardcoded "0 tasks" placeholder in FeatureCard
- DAGView never displayed errors from dag-store
- Silent IPC failures in multiple stores
- ContextView textarea didn't expand to fill available screen space

---

## Success Criteria (All Met)

- [x] App initializes auth on startup and shows auth status indicator
- [x] If auth fails, dialog prompts user for API key or OAuth token
- [x] User can create new features via UI
- [x] Loading states appear during async operations
- [x] Errors are displayed to users (not just console)
- [x] Users warned before losing unsaved changes
- [x] ContextView textarea fills available screen space

---

## Milestone Summary

**Key Decisions:**
- Use separate loading states (isMutating, isUndoing, isRedoing) for granular control
- Warning toast for partial failures (history, worktree) vs error toast for complete failures
- Promise-based callback pattern for dirty state confirmation dialogs
- Remove task count placeholder rather than load DAGs for performance

**Patterns Established:**
- Auth initialization pattern on app startup (main + renderer sync)
- Feature creation flow with dialog → store action → IPC → storage → git worktree
- Dirty state tracking with originalContent comparison
- Dismissible error banner pattern
- Disabled button pattern with opacity-60 and "(Soon)" label

**Issues Resolved:**
- All 7 authentication issues from v1.0 testing
- All 5 feature creation issues from v1.0 testing
- All 9 UI polish issues from v1.0 testing

**Issues Deferred:**
- Node-level chat (scoped AI for individual tasks)
- Locking behavior for nodes and connections
- Re-evaluate dependencies button functionality
- Claude CLI credential auto-detection (complex parsing)

**Technical Debt Incurred:**
- None - milestone focused on fixing existing issues

---

*For current project status, see .planning/ROADMAP.md*
