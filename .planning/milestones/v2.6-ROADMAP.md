# Milestone v2.6: Synthwave UI Redesign

**Status:** COMPLETE

## Progress

| Phase | Name | Status |
|-------|------|--------|
| 70 | Theme Infrastructure | ✅ Complete |
| 71 | Base UI - Buttons & Inputs | ✅ Complete |
| 72 | Base UI - Controls | ✅ Complete |
| 73 | Base UI - Layout | ✅ Complete |
| 74 | Background System | ✅ Complete |
| 75 | Migrate Layout Components | ✅ Complete |
| 76 | Migrate Kanban View | ✅ Complete |
| 77 | Migrate DAG View | ✅ Complete |
| 78 | Migrate Dialogs | ✅ Complete |
| 79 | Migrate Chat & Remaining Views | ✅ Complete |
| 80 | Migrate Project & Auth Components | ✅ Complete |
| 81 | Polish & Accessibility | ✅ Complete |
| 82 | Canvas Synthwave Grid | ✅ Complete |

## Overview

Complete visual redesign of the DAGent application with a synthwave/retrowave aesthetic. The implementation prioritizes a decoupled theming system with reusable UI components, enabling future theme switching capabilities.

## Design Reference

Three reference images in `/doc/`:
- `1.png` - Component showcase (buttons, inputs, checkboxes, toggles, sliders, badges, date picker)
- `2.png` - Kanban board view with neon-bordered columns
- `3.png` - Feature detail/chat view with node dialog

### Visual Language

| Element | Specification |
|---------|---------------|
| **Background** | Deep space gradient (#0a0015 → #1a0030) with starfield particles |
| **Horizon** | Neon gradient line (magenta → cyan) with reflection/glow |
| **Primary Accent** | Cyan (#00f0ff) - buttons, links, active states |
| **Secondary Accent** | Magenta (#ff00ff) - highlights, badges, borders |
| **Tertiary Accent** | Pink (#ff6090) - warnings, special states |
| **Success** | Neon green (#00ff88) |
| **Warning** | Neon orange (#ff9500) |
| **Error** | Neon red (#ff3366) |
| **Text Primary** | White (#ffffff) |
| **Text Secondary** | Light purple (#b8a0d0) |
| **Surface** | Semi-transparent dark (#1a1030/80) with blur |
| **Borders** | 1px with gradient or glow effect |

### Effect Specifications

| Effect | CSS Implementation |
|--------|-------------------|
| **Glow** | `box-shadow: 0 0 10px color, 0 0 20px color` |
| **Border Glow** | `border: 1px solid color; box-shadow: inset 0 0 10px color/30` |
| **Text Glow** | `text-shadow: 0 0 10px color` |
| **Gradient Border** | CSS `border-image` or pseudo-element with gradient |
| **Glass Effect** | `backdrop-filter: blur(10px); background: rgba(x,x,x,0.3)` |

## Problem Statement

1. **No theming infrastructure** - Colors hardcoded as Tailwind classes throughout components
2. **Inconsistent component styles** - Each component defines its own button/input styles
3. **No reusable primitives** - Similar UI patterns repeated with slight variations
4. **No theme switching** - Dark mode only, no architecture for theme variants
5. **Basic visual design** - Functional but minimal aesthetic appeal

## Solution: Decoupled Theme Architecture

### 1. CSS Custom Properties Theme System

Define all theme values as CSS custom properties in a centralized location:

```css
/* themes/synthwave.css */
:root[data-theme="synthwave"] {
  /* Backgrounds */
  --bg-base: #0a0015;
  --bg-surface: rgba(26, 16, 48, 0.8);
  --bg-elevated: rgba(40, 20, 70, 0.9);

  /* Accents */
  --accent-primary: #00f0ff;
  --accent-secondary: #ff00ff;
  --accent-tertiary: #ff6090;

  /* Semantic */
  --color-success: #00ff88;
  --color-warning: #ff9500;
  --color-error: #ff3366;

  /* Text */
  --text-primary: #ffffff;
  --text-secondary: #b8a0d0;
  --text-muted: #6a5080;

  /* Borders */
  --border-default: rgba(255, 0, 255, 0.3);
  --border-accent: var(--accent-secondary);

  /* Effects */
  --glow-primary: 0 0 10px var(--accent-primary), 0 0 20px var(--accent-primary);
  --glow-secondary: 0 0 10px var(--accent-secondary), 0 0 20px var(--accent-secondary);

  /* Spacing (unchanged) */
  --space-xs: 0.25rem;
  --space-sm: 0.5rem;
  --space-md: 0.75rem;
  --space-lg: 1rem;
  --space-xl: 1.5rem;
}
```

### 2. Reusable UI Component Library

Create a `src/renderer/src/components/UI/` directory with base components:

| Component | Variants | Description |
|-----------|----------|-------------|
| `Button` | primary, secondary, ghost, danger | Neon-glow buttons with hover effects |
| `Input` | text, number, date | Glowing border inputs |
| `Checkbox` | default, glow | Neon checkbox with check animation |
| `Radio` | default | Radio button group |
| `Toggle` | default | Sliding toggle switch |
| `Slider` | default | Range slider with glow track |
| `Badge` | status, label | Status badges and labels |
| `Card` | default, elevated | Glass-effect containers |
| `Dialog` | default | Modal with backdrop blur |
| `Select` | default | Dropdown selector |
| `Tabs` | default | Tab navigation |
| `Tooltip` | default | Hover tooltips |

### 3. Theme Context Provider

```tsx
// contexts/ThemeContext.tsx
interface ThemeContextValue {
  theme: 'synthwave' | 'dark' | 'light';
  setTheme: (theme: string) => void;
}
```

### 4. Background System

Dedicated background component with:
- Starfield particle animation (CSS or canvas)
- Gradient horizon with glow
- Subtle grid lines (optional)

## Phases

### Phase 70: Theme Infrastructure
**Goal:** Create CSS custom properties system and theme provider

**Deliverables:**
- Theme CSS files (`synthwave.css`, `dark.css` placeholder)
- ThemeContext and ThemeProvider
- Theme persistence (localStorage)
- Tailwind config for CSS variable integration
- Update `main.css` and `base.css`

**Files:**
- `src/renderer/src/themes/synthwave.css`
- `src/renderer/src/themes/dark.css`
- `src/renderer/src/contexts/ThemeContext.tsx`
- `src/renderer/src/assets/main.css`
- `tailwind.config.js` (if needed)

### Phase 71: Base UI Components - Buttons & Inputs
**Goal:** Create reusable button and input components

**Deliverables:**
- `Button` component with all variants
- `Input` component with text/number/date types
- `Textarea` component
- Component documentation/storybook (optional)

**Files:**
- `src/renderer/src/components/UI/Button.tsx`
- `src/renderer/src/components/UI/Input.tsx`
- `src/renderer/src/components/UI/Textarea.tsx`
- `src/renderer/src/components/UI/index.ts`

### Phase 72: Base UI Components - Controls
**Goal:** Create checkbox, radio, toggle, and slider components

**Deliverables:**
- `Checkbox` component
- `Radio` component
- `Toggle` component
- `Slider` component
- `Select` dropdown component

**Files:**
- `src/renderer/src/components/UI/Checkbox.tsx`
- `src/renderer/src/components/UI/Radio.tsx`
- `src/renderer/src/components/UI/Toggle.tsx`
- `src/renderer/src/components/UI/Slider.tsx`
- `src/renderer/src/components/UI/Select.tsx`

### Phase 73: Base UI Components - Layout
**Goal:** Create card, dialog, badge, tabs components

**Deliverables:**
- `Card` component with glass effect
- `Dialog` component with backdrop
- `Badge` component for statuses
- `Tabs` component
- `Tooltip` component

**Files:**
- `src/renderer/src/components/UI/Card.tsx`
- `src/renderer/src/components/UI/Dialog.tsx`
- `src/renderer/src/components/UI/Badge.tsx`
- `src/renderer/src/components/UI/Tabs.tsx`
- `src/renderer/src/components/UI/Tooltip.tsx`

### Phase 74: Background System
**Goal:** Create synthwave background with starfield and horizon

**Deliverables:**
- `SynthwaveBackground` component
- Starfield animation (CSS keyframes or canvas)
- Gradient horizon with glow
- Grid lines overlay (optional)
- Performance optimization (reduce motion support)

**Files:**
- `src/renderer/src/components/Background/SynthwaveBackground.tsx`
- `src/renderer/src/components/Background/Starfield.tsx`
- `src/renderer/src/components/Background/Horizon.tsx`

### Phase 75: Migrate Layout Components
**Goal:** Update layout shell with new theme

**Deliverables:**
- Update `App.tsx` with ThemeProvider and background
- Migrate `ViewSidebar` to use UI components
- Migrate `StatusBar` to use UI components
- Migrate `ResizeHandle` styling

**Files:**
- `src/renderer/src/App.tsx`
- `src/renderer/src/components/Layout/ViewSidebar.tsx`
- `src/renderer/src/components/Layout/StatusBar.tsx`
- `src/renderer/src/components/Layout/ResizeHandle.tsx`

### Phase 76: Migrate Kanban View
**Goal:** Restyle Kanban board with synthwave aesthetic

**Deliverables:**
- Update `KanbanView` layout
- Migrate `KanbanColumn` with neon borders
- Migrate `FeatureCard` to use Card component
- Status color mapping to theme variables

**Files:**
- `src/renderer/src/views/KanbanView.tsx`
- `src/renderer/src/components/Kanban/KanbanColumn.tsx`
- `src/renderer/src/components/Kanban/FeatureCard.tsx`

### Phase 77: Migrate DAG View
**Goal:** Restyle DAG graph view with synthwave aesthetic

**Deliverables:**
- Update `DAGView` container
- Restyle `TaskNode` with neon glow
- Restyle `SelectableEdge` with gradient
- Update `ExecutionControls` buttons
- Update `FeatureTabs`

**Files:**
- `src/renderer/src/views/DAGView.tsx`
- `src/renderer/src/components/DAG/TaskNode.tsx`
- `src/renderer/src/components/DAG/SelectableEdge.tsx`
- `src/renderer/src/components/DAG/ExecutionControls.tsx`
- `src/renderer/src/components/DAG/FeatureTabs.tsx`

### Phase 78: Migrate Dialogs
**Goal:** Update all dialog components

**Deliverables:**
- Migrate `NodeDialog` to use Dialog component
- Migrate `NewFeatureDialog`
- Migrate `DeleteFeatureDialog`
- Migrate `FeatureMergeDialog`
- Migrate `LogDialog` and `SessionLogDialog`

**Files:**
- `src/renderer/src/components/DAG/NodeDialog.tsx`
- `src/renderer/src/components/Feature/NewFeatureDialog.tsx`
- `src/renderer/src/components/Feature/DeleteFeatureDialog.tsx`
- `src/renderer/src/components/Feature/FeatureMergeDialog.tsx`
- `src/renderer/src/components/DAG/LogDialog.tsx`
- `src/renderer/src/components/DAG/SessionLogDialog.tsx`

### Phase 79: Migrate Chat & Remaining Views
**Goal:** Update chat panel and remaining views

**Deliverables:**
- Migrate `ChatPanel` and `ChatMessage`
- Migrate `FeatureChat`
- Migrate `FeatureSpecViewer`
- Migrate `ContextView`
- Migrate `AgentsView`

**Files:**
- `src/renderer/src/components/Chat/ChatPanel.tsx`
- `src/renderer/src/components/Chat/ChatMessage.tsx`
- `src/renderer/src/components/Chat/FeatureChat.tsx`
- `src/renderer/src/components/Feature/FeatureSpecViewer.tsx`
- `src/renderer/src/views/ContextView.tsx`
- `src/renderer/src/views/AgentsView.tsx`

### Phase 80: Migrate Project & Auth Components
**Goal:** Update project selection and auth dialogs

**Deliverables:**
- Migrate `ProjectSelector`
- Migrate `ProjectSelectionDialog`
- Migrate `NewProjectDialog`
- Migrate `GitInitDialog`
- Migrate `AuthDialog`
- Migrate `AuthStatusIndicator`

**Files:**
- `src/renderer/src/components/Project/*.tsx`
- `src/renderer/src/components/Auth/*.tsx`

### Phase 81: Polish & Accessibility
**Goal:** Final polish, animations, and accessibility

**Deliverables:**
- Consistent hover/focus states across all components
- Keyboard navigation improvements
- ARIA labels and roles
- Reduced motion support
- Loading state animations
- Toast notification styling
- Error boundary styling

**Files:**
- Various component updates
- `src/renderer/src/components/Toast/Toast.tsx`
- `src/renderer/src/components/Loading/LoadingSpinner.tsx`

### Phase 82: Canvas Synthwave Grid
**Goal:** Replace CSS-based perspective grid with canvas-rendered synthwave grid

**Deliverables:**
- `SynthwaveGrid` canvas component replacing CSS grid
- Curved horizontal lines following horizon ellipse curvature
- Animated "scrolling toward viewer" effect
- Terrain/mountain silhouettes on edges (optional)
- Glow effects and color gradients (cyan/magenta)
- Performance-optimized requestAnimationFrame loop
- Reduced motion support (static fallback)
- Integration with existing Horizon component

**Files:**
- `src/renderer/src/components/Background/SynthwaveGrid.tsx`
- `src/renderer/src/components/Background/Horizon.tsx` (update)
- `src/renderer/src/components/Background/SynthwaveBackground.tsx` (update)

## Architecture

```
src/renderer/src/
├── themes/
│   ├── synthwave.css      # Synthwave theme variables
│   ├── dark.css           # Dark theme (future)
│   └── index.css          # Theme loader
├── contexts/
│   └── ThemeContext.tsx   # Theme provider
├── components/
│   ├── UI/                # Reusable primitives
│   │   ├── Button.tsx
│   │   ├── Input.tsx
│   │   ├── Checkbox.tsx
│   │   ├── Toggle.tsx
│   │   ├── Slider.tsx
│   │   ├── Badge.tsx
│   │   ├── Card.tsx
│   │   ├── Dialog.tsx
│   │   ├── Select.tsx
│   │   ├── Tabs.tsx
│   │   ├── Tooltip.tsx
│   │   └── index.ts       # Barrel export
│   ├── Background/        # Theme backgrounds
│   │   ├── SynthwaveBackground.tsx
│   │   ├── Starfield.tsx
│   │   └── Horizon.tsx
│   └── [existing folders] # Updated to use UI components
└── assets/
    ├── base.css           # Reset + CSS variable fallbacks
    └── main.css           # Tailwind + theme imports
```

### Component Usage Pattern

```tsx
// Before (hardcoded styles)
<button className="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md">
  Save
</button>

// After (themed component)
<Button variant="primary">Save</Button>
```

### Theme Switching

```tsx
// Future capability
const { theme, setTheme } = useTheme();

<Select value={theme} onChange={setTheme}>
  <option value="synthwave">Synthwave</option>
  <option value="dark">Dark</option>
  <option value="light">Light</option>
</Select>
```

## Success Criteria

- [ ] All UI components use CSS custom properties (no hardcoded colors)
- [ ] Reusable UI component library in `components/UI/`
- [ ] ThemeContext provider with theme persistence
- [ ] Synthwave theme matches reference images
- [ ] Background with starfield and horizon glow
- [ ] All existing components migrated to use UI primitives
- [ ] Theme can be switched by changing `data-theme` attribute
- [ ] Keyboard navigation works on all interactive elements
- [ ] Reduced motion support for animations

## Dependencies

- Tailwind CSS 4.x (existing)
- CSS custom properties (native)
- React Context API (native)

## Risk Mitigation

1. **Performance** - Canvas starfield may impact performance
   - Mitigation: CSS-only fallback, `prefers-reduced-motion` support

2. **Migration scope** - Many files to update
   - Mitigation: Phase-by-phase approach, UI components first

3. **Tailwind integration** - CSS variables with Tailwind
   - Mitigation: Use `theme()` function and custom utilities

## Non-Goals

- Light theme implementation (infrastructure only)
- Theme editor/customizer
- Export/import themes
- Per-component theme overrides
